\usepackage[margin=2cm]{geometry}
\usepackage{xcolor}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{centernot}
\usepackage{tabularx}
\usepackage{listings}
% \usepackage{bondgraphs}
\usepackage[format=plain,
            labelfont={bf,it},
            textfont=it]{caption}
% \usepackage{bbold}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{fancyhdr}

\usepackage{subcaption}
\usepackage[framemethod=TikZ]{mdframed}
% Defining custom colors
\definecolor{catppuccinblue}{HTML}{8caaee}
\definecolor{catppuccinpink}{HTML}{f4b8e4}
\definecolor{catppuccinpurple}{HTML}{cba6f7}
\definecolor{catppuccinyellow}{HTML}{e5c890}
\definecolor{catppuccinorange}{HTML}{fab387}
\definecolor{catppuccinteal}{HTML}{8bd5ca}
\definecolor{catppuccinmaroon}{HTML}{eba0ac}
\definecolor{catppuccingreen}{HTML}{a6e3a1}
\definecolor{catppuccingray}{HTML}{9399b2}

%% Custom commands and enviroments
\newcommand{\rank}{\text{Rank}}
\newcommand{\sinc}{\text{sinc}}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\newcommand{\inlinemaketitle}{{\let\newpage\relax\maketitle}}

\renewcommand{\familydefault}{\sfdefault}


% Current implemented Enviroments:
%     - Theorem (Blue)
%     - Definition (Pink)
%     - Question (Yellow)
%     - Proof (Mint)
%     - Derivation (Green)
%     - Note (Gray)
%     - Example (Purple)
%     - Warning (Orange)


% Theorem
\newcounter{theo}[section]\setcounter{theo}{0}
\renewcommand{\thetheo}{\arabic{section}.\arabic{theo}}
\newenvironment{theo}[2][]{%
	\refstepcounter{theo}%
	\ifstrempty{#1}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinblue]
			{\strut Theorem~\thetheo};}}
		}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt] \node[anchor=east,rectangle,fill=catppuccinblue]
			{\strut Theorem~:~#1};}}%
		}%
		\mdfsetup{innertopmargin=5pt,linecolor=catppuccinblue,%
			linewidth=2pt,topline=true,%
			frametitleaboveskip=\dimexpr-\ht\strutbox\relax
		}
		\hspace{1em}\begin{mdframed}[]\relax%
	\label{#2}}{\end{mdframed}}


% Definition
	\newcounter{defn}[section]\setcounter{defn}{0}
	\renewcommand{\thedefn}{\arabic{section}.\arabic{defn}}
	\newenvironment{defn}[2][]{%
		\refstepcounter{defn}%
		\ifstrempty{#1}%
			{\mdfsetup{%
					frametitle={%
						\tikz[baseline=(current bounding box.east),outer sep=0pt]
						\node[anchor=east,rectangle,fill=catpuccinpink]
				{\strut Definition~\thedefn};}}
			}%
			{\mdfsetup{%
					frametitle={%
						\tikz[baseline=(current bounding box.east),outer sep=0pt]
						\node[anchor=east,rectangle,fill=catppuccinpink]
				{\strut Definition~:~#1};}}%
			}%
			\mdfsetup{innertopmargin=5pt,linecolor=catppuccinpink,%
				linewidth=2pt,topline=true,%
				frametitleaboveskip=\dimexpr-\ht\strutbox\relax
			}
			\hspace{1em}\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}

% Question
	\newcounter{quest}[section]\setcounter{quest}{0}
	\renewcommand{\thequest}{\arabic{section}.\arabic{quest}}
	\newenvironment{quest}[2][]{%
		\refstepcounter{quest}%
		\ifstrempty{#1}%
			{\mdfsetup{%
					frametitle={%
						\tikz[baseline=(current bounding box.east),outer sep=0pt]
						\node[anchor=east,rectangle,fill=catpuccinyellow]
				{\strut Question~\thequest};}}
			}%
			{\mdfsetup{%
					frametitle={%
						\tikz[baseline=(current bounding box.east),outer sep=0pt]
						\node[anchor=east,rectangle,fill=catppuccinyellow]
				{\strut Question~:~#1};}}%
			}%
			\mdfsetup{innertopmargin=5pt,linecolor=catppuccinyellow,%
				linewidth=2pt,topline=true,%
				frametitleaboveskip=\dimexpr-\ht\strutbox\relax
			}
			\hspace{1em}\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}

% Proof
\newcounter{proof}[section]\setcounter{proof}{0}
\renewcommand{\theproof}{\arabic{section}.\arabic{proof}}
\newenvironment{proof}[2][]{%
	\refstepcounter{proof}%
	\ifstrempty{#1}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinteal]
			{\strut Proof~\theproof};}}
		}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinteal]
			{\strut Proof~:~#1};}}%
		}%
		\mdfsetup{innertopmargin=5pt,linecolor=catppuccinteal,%
			linewidth=2pt,topline=true,%
			frametitleaboveskip=\dimexpr-\ht\strutbox\relax
		}
		\hspace{1em}\begin{mdframed}[]\relax%
	\label{#2}}{\end{mdframed}}

% Derivation
\newcounter{derivation}[section]\setcounter{derivation}{0}
\renewcommand{\thederivation}{\arabic{section}.\arabic{derivation}}
\newenvironment{derivation}[2][]{%
	\refstepcounter{derivation}%
	\ifstrempty{#1}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccingreen]
			{\strut Derivation~\thederivation};}}
		}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccingreen]
			{\strut Derivation~:~#1};}}%
		}%
		\mdfsetup{innertopmargin=5pt,linecolor=catppuccingreen,%
			linewidth=2pt,topline=true,%
			frametitleaboveskip=\dimexpr-\ht\strutbox\relax
		}
		\hspace{1em}\begin{mdframed}[]\relax%
	\label{#2}}{\end{mdframed}}

% Note
\newcounter{note}[section]\setcounter{note}{0}
\renewcommand{\thenote}{\arabic{section}.\arabic{note}}
\newenvironment{note}[2][]{%
	\refstepcounter{note}%
	\ifstrempty{#1}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccingray]
			{\strut note~\thenote};}}
		}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccingray]
			{\strut Note~:~#1};}}%
		}%
		\mdfsetup{innertopmargin=5pt,linecolor=catppuccingray,%
			linewidth=2pt,topline=true,%
			frametitleaboveskip=\dimexpr-\ht\strutbox\relax
		}
		\hspace{1em}\begin{mdframed}[]\relax%
	\label{#2}}{\end{mdframed}}

% Example
\newcounter{example}[section]\setcounter{example}{0}
\renewcommand{\theexample}{\arabic{section}.\arabic{example}}
\newenvironment{example}[2][]{%
	\refstepcounter{example}%
	\ifstrempty{#1}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinpurple]
			{\strut example~\theexample};}}
		}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinpurple]
			{\strut Example~:~#1};}}%
		}%
		\mdfsetup{innertopmargin=5pt,linecolor=catppuccinpurple,%
			linewidth=2pt,topline=true,%
			frametitleaboveskip=\dimexpr-\ht\strutbox\relax
		}
		\hspace{1em}\begin{mdframed}[]\relax%
	\label{#2}}{\end{mdframed}}


% Warning
\newcounter{warning}[section]\setcounter{warning}{0}
\renewcommand{\thewarning}{\arabic{section}.\arabic{warning}}
\newenvironment{warning}[2][]{%
	\refstepcounter{warning}%
	\ifstrempty{#1}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinorange]
			{\strut warning~\thewarning};}}
		}%
		{\mdfsetup{%
				frametitle={%
					\tikz[baseline=(current bounding box.east),outer sep=0pt]
					\node[anchor=east,rectangle,fill=catppuccinorange]
			{\strut Warning~:~#1};}}%
		}%
		\mdfsetup{innertopmargin=5pt,linecolor=catppuccinorange,%
			linewidth=2pt,topline=true,%
			frametitleaboveskip=\dimexpr-\ht\strutbox\relax
		}
		\hspace{1em}\begin{mdframed}[]\relax%
	\label{#2}}{\end{mdframed}}
